---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
}

const { title, description = 'AI、IoT、クラウド技術に関する知見とアイデアを育てる場所' } = Astro.props;
const baseUrl = import.meta.env.BASE_URL;
const siteUrl = import.meta.env.SITE || 'https://takenori-kusaka.github.io';
const fullUrl = `${siteUrl}${baseUrl}`;
---

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content={description}>
  <meta name="generator" content={Astro.generator}>
  <meta name="author" content="日下武紀 (Takenori Kusaka)">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="512x512" href={`${baseUrl}/favicon.png`}>
  <link rel="apple-touch-icon" href={`${baseUrl}/favicon.png`}>

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content={fullUrl}>
  <meta property="og:title" content={`${title} | 日下武紀`}>
  <meta property="og:description" content={description}>
  <meta property="og:image" content={`${siteUrl}${baseUrl}/og-image.png`}>
  <meta property="og:site_name" content="日下武紀 - Knowledge Base">
  <meta property="og:locale" content="ja_JP">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content={fullUrl}>
  <meta name="twitter:title" content={`${title} | 日下武紀`}>
  <meta name="twitter:description" content={description}>
  <meta name="twitter:image" content={`${siteUrl}${baseUrl}/og-image.png`}>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!-- Mermaid for diagram rendering -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
      startOnLoad: true,
      theme: 'default',
      themeVariables: {
        primaryColor: '#2563eb',
        primaryTextColor: '#1e3a8a',
        primaryBorderColor: '#3b82f6',
        lineColor: '#60a5fa',
        secondaryColor: '#93c5fd',
        tertiaryColor: '#dbeafe',
        fontFamily: 'Noto Sans JP, sans-serif'
      }
    });
  </script>

  <title>{title} | 日下武紀</title>
</head>
<body class="min-h-screen bg-gray-50 text-gray-900">
  <!-- Header -->
  <header class="bg-white shadow-sm sticky top-0 z-50">
    <div class="container mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <a href={baseUrl} class="flex items-center gap-3 hover:opacity-80 transition">
            <img
              src={`${baseUrl}/profile-photo.png`}
              alt="日下武紀"
              class="w-10 h-10 rounded-full object-cover border-2 border-blue-500"
            />
            <div>
              <h1 class="text-xl font-bold text-gray-900">日下 武紀</h1>
              <p class="text-xs text-gray-500">Knowledge Base</p>
            </div>
          </a>
        </div>
        <nav class="flex gap-6">
          <a href={`${baseUrl}insights/`} class="text-gray-700 hover:text-blue-600 transition">
            Insights
          </a>
          <a href={`${baseUrl}ideas/`} class="text-gray-700 hover:text-blue-600 transition">
            Ideas
          </a>
          <a href={`${baseUrl}weekly-reviews/`} class="text-gray-700 hover:text-blue-600 transition">
            Weekly Reviews
          </a>
          <a href={`${baseUrl}resume/`} class="text-gray-700 hover:text-blue-600 transition">
            Resume
          </a>
          <a href={`${baseUrl}about/`} class="text-gray-700 hover:text-blue-600 transition">
            About
          </a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">
    <slot />
  </main>

  <!-- Footer -->
  <footer class="bg-white border-t mt-16">
    <div class="container mx-auto px-4 py-8">
      <div class="text-center text-gray-600">
        <p>&copy; 2025 日下武紀 (Takenori Kusaka). Powered by Digital Garden Automation System.</p>
        <div class="flex justify-center gap-4 mt-4 text-sm flex-wrap">
          <a href="https://github.com/Takenori-Kusaka" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">
            GitHub
          </a>
          <span class="text-gray-400">|</span>
          <a href={`${baseUrl}resume/`} class="text-blue-600 hover:underline">
            Resume
          </a>
          <span class="text-gray-400">|</span>
          <a href="https://takenori-kusaka.github.io/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">
            Homepage
          </a>
          <span class="text-gray-400">|</span>
          <a href="https://www.youtube.com/channel/UCD1zo-WnyFdE5w0pqvKblkA" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">
            YouTube
          </a>
          <span class="text-gray-400">|</span>
          <a href="https://listen.style/p/recalog" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">
            Podcast (Listen)
          </a>
        </div>
      </div>
    </div>
  </footer>
</body>
</html>
