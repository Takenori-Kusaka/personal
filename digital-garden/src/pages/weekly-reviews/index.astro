---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Card from '../../components/Card.astro';
import { getCollection } from 'astro:content';

const weeklyReviews = (await getCollection('weekly-reviews'))
  .filter(entry => !entry.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const baseUrl = import.meta.env.BASE_URL;
---

<BaseLayout
  title="Weekly Reviews"
  description="é€±æ¬¡æŒ¯ã‚Šè¿”ã‚Š - æ¯é€±ã®å­¦ã³ã¨æˆé•·ã®è¨˜éŒ²"
>
  <div class="mb-12">
    <h1 class="text-4xl md:text-5xl font-bold mb-4 flex items-center gap-3">
      <span>ğŸ“…</span>
      <span>Weekly Reviews</span>
    </h1>
    <p class="text-xl text-gray-600">
      æ¯é€±ã®æŒ¯ã‚Šè¿”ã‚Šã§ã€ç¶™ç¶šçš„ãªæˆé•·ã‚’è¨˜éŒ²ã—ã¦ã„ã¾ã™
    </p>
  </div>

  {weeklyReviews.length > 0 ? (
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {weeklyReviews.map((entry) => (
        <Card
          title={entry.data.title}
          description={entry.data.description}
          url={`${baseUrl}/weekly-reviews/${entry.slug}/`}
          pubDate={entry.data.pubDate}
          tags={entry.data.tags}
          category={entry.data.category}
        />
      ))}
    </div>
  ) : (
    <div class="text-center py-16 bg-white rounded-lg shadow">
      <div class="text-6xl mb-4">ğŸŒ±</div>
      <h3 class="text-2xl font-bold mb-4">ã¾ã Weekly ReviewsãŒã‚ã‚Šã¾ã›ã‚“</h3>
      <p class="text-gray-600">
        æœ€åˆã®Weekly Reviewsã‚’è¿½åŠ ã—ã¦ã€ã‚¬ãƒ¼ãƒ‡ãƒ³ã‚’è‚²ã¦å§‹ã‚ã¾ã—ã‚‡ã†
      </p>
    </div>
  )}
</BaseLayout>
